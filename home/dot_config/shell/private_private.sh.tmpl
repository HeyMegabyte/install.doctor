{{- if (stat (joinPath .host.home ".config" "age" "chezmoi.txt")) -}}
#!/usr/bin/env sh

### Ansible
export ANSIBLE_GALAXY_TOKEN="{{ if (stat (joinPath .chezmoi.sourceDir ".chezmoitemplates" "secrets" "key-ANSIBLE_GALAXY_TOKEN")) }}{{ includeTemplate "secrets/key-ANSIBLE_GALAXY_TOKEN" }}{{ else }}{{ env "ANSIBLE_GALAXY_TOKEN" }}{{ end }}"
export ANSIBLE_VAULT_PASSWORD="{{ if (stat (joinPath .chezmoi.sourceDir ".chezmoitemplates" "secrets" "key-ANSIBLE_VAULT_PASSWORD")) }}{{ includeTemplate "secrets/key-ANSIBLE_VAULT_PASSWORD" }}{{ else }}{{ env "ANSIBLE_VAULT_PASSWORD" }}{{ end }}"
export AVP="$ANSIBLE_VAULT_PASSWORD"

### Google Cloud SDK
export CLOUDSDK_CORE_PROJECT="{{ .user.gcloud.coreProject }}"
export GCE_SERVICE_ACCOUNT_EMAIL="{{ .user.gcloud.email }}"
export GCE_CREDENTIALS_FILE="$HOME/.config/gcloud/gcp.json"

### CloudFlare
export LEXICON_CLOUDFLARE_TOKEN=""
export LEXICON_CLOUDFLARE_USERNAME="{{ .user.cloudflare.username }}"

### DockerHub
export DOCKERHUB_TOKEN="{{ if (stat (joinPath .chezmoi.sourceDir ".chezmoitemplates" "secrets" "key-DOCKERHUB_TOKEN")) }}{{ includeTemplate "secrets/key-DOCKERHUB_TOKEN" }}{{ else }}{{ env "DOCKERHUB_TOKEN" }}{{ end }}"
export DOCKERHUB_REGISTRY_PASSWORD="$DOCKERHUB_TOKEN"

### GitHub
export GH_TOKEN="{{ if (stat (joinPath .chezmoi.sourceDir ".chezmoitemplates" "secrets" "key-GITHUB_TOKEN")) }}{{ includeTemplate "secrets/key-GITHUB_TOKEN" }}{{ else }}{{ env "GITHUB_TOKEN" }}{{ end }}"
export GITHUB_TOKEN="$GH_TOKEN"

### GitLab
export GL_TOKEN="{{ if (stat (joinPath .chezmoi.sourceDir ".chezmoitemplates" "secrets" "key-GITLAB_TOKEN")) }}{{ includeTemplate "secrets/key-GITLAB_TOKEN" }}{{ else }}{{ env "GITLAB_TOKEN" }}{{ end }}"
export GITLAB_TOKEN="$GL_TOKEN"

### Heroku
export HEROKU_API_KEY="{{ if (stat (joinPath .chezmoi.sourceDir ".chezmoitemplates" "secrets" "key-HEROKU_API_KEY")) }}{{ includeTemplate "secrets/key-HEROKU_API_KEY" }}{{ else }}{{ env "HEROKU_API_KEY" }}{{ end }}"

### Megabyte Labs
export FULLY_AUTOMATED_TASKS=true

### NPM
export NPM_TOKEN="{{ if (stat (joinPath .chezmoi.sourceDir ".chezmoitemplates" "secrets" "key-NPM_TOKEN")) }}{{ includeTemplate "secrets/key-NPM_TOKEN" }}{{ else }}{{ env "NPM_TOKEN" }}{{ end }}"

### PyPi
export PYPI_TOKEN="{{ if (stat (joinPath .chezmoi.sourceDir ".chezmoitemplates" "secrets" "key-PYPI_TOKEN")) }}{{ includeTemplate "secrets/key-PYPI_TOKEN" }}{{ else }}{{ env "PYPI_TOKEN" }}{{ end }}"

### Snapcraft
export SNAPCRAFT_EMAIL="{{ .user.snapcraft.username }}"
export SNAPCRAFT_MACAROON="{{ if (stat (joinPath .chezmoi.sourceDir ".chezmoitemplates" "secrets" "key-SNAPCRAFT_MACAROON")) }}{{ includeTemplate "secrets/key-SNAPCRAFT_MACAROON" }}{{ else }}{{ env "SNAPCRAFT_MACAROON" }}{{ end }}"
export SNAPCRAFT_UNBOUND_DISCHARGE="{{ if (stat (joinPath .chezmoi.sourceDir ".chezmoitemplates" "secrets" "key-SNAPCRAFT_UNBOUND_DISCHARGE")) }}{{ includeTemplate "secrets/key-SNAPCRAFT_UNBOUND_DISCHARGE" }}{{ else }}{{ env "SNAPCRAFT_UNBOUND_DISCHARGE" }}{{ end }}"

### Vagrant Cloud
export VAGRANT_CLOUD_TOKEN="{{ if (stat (joinPath .chezmoi.sourceDir ".chezmoitemplates" "secrets" "key-VAGRANT_CLOUD_TOKEN")) }}{{ includeTemplate "secrets/key-VAGRANT_CLOUD_TOKEN" }}{{ else }}{{ env "VAGRANT_CLOUD_TOKEN" }}{{ end }}"

{{ end -}}
