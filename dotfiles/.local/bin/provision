#!/usr/bin/env bash

# Install Homebrew
if ! type brew &> /dev/null; then
  if type sudo &> /dev/null && sudo -n true; then
    echo | /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
  else
    /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
  fi
fi

# Install Homebrew bundle and go-task
brew install go-task/tap/go-task

# Run dotfiles install scripts
chmod +x $HOME/.local/bin/*
install-dotfiles

# Use run alias to invoke the `$HOME/.local/Taskfile.yml`
run localhost:provision
