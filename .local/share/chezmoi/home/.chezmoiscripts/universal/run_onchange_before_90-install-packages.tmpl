#!/usr/bin/env bash

{{- includeTemplate "universal/profile" }}
{{- includeTemplate "universal/logg" }}

# software: {{ index .softwareGroups .host.softwareGroup | toString | replace "[" "" | replace "]" "" }}

if command -v install-program > /dev/null; then
  if command -v zx > /dev/null; then
    logg info 'Installing packages defined in .chezmoidata.yaml under the .softwareGroups key'
    logg info 'Installing: {{ index .softwareGroups .host.softwareGroup | toString | replace "[" "" | replace "]" "" }}'
    install-program {{ index .softwareGroups .host.softwareGroup | toString | replace "[" "" | replace "]" "" }}
  else
    logg error '`zx` is not available'
  fi
else
  logg error '`install-program` is not in the PATH. It should be located in ~/.local/bin.'
fi
